# yaml-language-server: $schema=https://schema.blue-build.org/module-stage-list-v1.json
modules:
- type: files
  files:
    - source: dconf-ublue
      destination: /etc/dconf/db/distro.d
- type: script
  snippets:
    - "dnf5 -y install --nogpgcheck --repofrompath 'terra,https://repos.fyralabs.com/terra$releasever' terra-release"
    - "dnf5 -y install terra-release-extras || true"
    - 'dnf5 config-manager setopt "terra*".enabled=0'
- type: dnf
  repos:
    # files:
      # These repos have the Readymade installer, which is used in the ISO
      # build process.  They already exist on Bluefin.
      # However, this doesn't work with the dnf plugin, so we use
      # the script snippets above, copypasta from Bluefin
      # - https://repos.fyralabs.com/terra%OS_VERSION%
      # - https://repos.fyralabs.com/terra%OS_VERSION%-extras
    copr:
      - ublue-os/staging
      - ublue-os/packages
  install:
    packages:
      - gnome-shell-extension-logo-menu
      - bluefin-backgrounds


